---
description: ìƒˆ ê¸°ëŠ¥ êµ¬í˜„ ê³„íšì„œ ì‘ì„± (êµ¬í˜„ ì‹œì‘ ì „ í•„ìˆ˜)
---

# IMP-planning

> **ì›ì¹™**: ë¦¬íŒ©í„°ë§ ì—†ëŠ” ì½”ë“œ. REFACTORING.md ê·œì¹™ 100% ì¤€ìˆ˜.

## 1. Clarifying Questions (ëŒ€í˜• ì‘ì—… í•„ìˆ˜)

> **ì ìš© ì¡°ê±´**: ì˜ˆìƒ ì‘ì—… ì‹œê°„ 4ì‹œê°„+ ë˜ëŠ” ì—¬ëŸ¬ ë ˆì´ì–´ ë³€ê²½

### ì§ˆë¬¸ ì˜ì—­
| ì˜ì—­ | ì§ˆë¬¸ ëª©ì  |
|------|----------|
| **Problem/Goal** | ì´ ê¸°ëŠ¥ì´ í•´ê²°í•˜ëŠ” ë¬¸ì œëŠ”? |
| **Core Functionality** | ì‚¬ìš©ìê°€ ìˆ˜í–‰í•  í•µì‹¬ ì•¡ì…˜ì€? |
| **Scope/Boundaries** | ì´ ê¸°ëŠ¥ì´ í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒì€? |
| **Success Criteria** | ì„±ê³µì  êµ¬í˜„ì˜ ê¸°ì¤€ì€? |

### ì§ˆë¬¸ í˜•ì‹ (A/B/C ì„ íƒì§€ ì œê³µ)
```
1. ì´ ê¸°ëŠ¥ì˜ ì£¼ìš” ì‚¬ìš©ìëŠ”?
   A. ì¼ë°˜ ì‚¬ìš©ì
   B. ê´€ë¦¬ì
   C. ëª¨ë“  ì‚¬ìš©ì

2. êµ¬í˜„ ìš°ì„ ìˆœìœ„ëŠ”?
   A. ê¸´ê¸‰ (1-2ì¼)
   B. ë†’ìŒ (1ì£¼)
   C. í‘œì¤€ (2ì£¼)
```

> âš ï¸ **ì‚¬ìš©ì ë‹µë³€ ìˆ˜ì§‘ í›„ ê³„íšì„œ ì‘ì„± ì§„í–‰**

---

## 2. í•„ìˆ˜ ì»¨í…ìŠ¤íŠ¸

// turbo
```
docs/Plan/refactor/REFACTORING.md  â† í•µì‹¬ (Â§3-Â§6 í•„ìˆ˜)
docs/_architecture/_index.md       â† ì „ì²´ íŒŒì¼ êµ¬ì¡°
docs/_architecture/Full_DataFlow.md â† ë°ì´í„° íë¦„ ë‹¤ì´ì–´ê·¸ë¨
```

---

## 3. ë ˆì´ì–´ ì˜ì¡´ì„± (REFACTORING.md Â§3.3)

```
[ìƒìœ„] â† [í•˜ìœ„] ë°©í–¥ë§Œ í—ˆìš©

backend.api
    â†“
backend.core
    â†“
backend.strategies
    â†“
backend.data
    â†“
backend.broker
```

| ìœ„ë°˜ ì‹œ | ê²°ê³¼ |
|--------|------|
| ì—­ë°©í–¥ import | `lint-imports` ì‹¤íŒ¨ â†’ ë¨¸ì§€ ë¶ˆê°€ |
| ìˆœí™˜ import | `pydeps --show-cycles` ê²€ì¶œ â†’ ìˆ˜ì • í•„ìˆ˜ |

### ê¸ˆì§€ëœ import íŒ¨í„´
```python
# âŒ backend.dataê°€ strategies import
from backend.strategies import ...

# âŒ backend.strategiesê°€ api import
from backend.api import ...

# âŒ backend â†” frontend ìƒí˜¸ import
from frontend import ...  # in backend
from backend import ...   # in frontend
```

---

## 4. DI íŒ¨í„´ (REFACTORING.md Â§5-Â§6)

### ê¸ˆì§€ íŒ¨í„´
```python
# âŒ ì „ì—­ ì‹±ê¸€í†¤
_instance = None
def get_scanner_instance(): ...
```

### í•„ìˆ˜ íŒ¨í„´
```python
# âœ… Container ë“±ë¡
# backend/container.py
scanner = providers.Singleton(RealtimeScanner, db=db_client)

# âœ… ì£¼ì…ë°›ì•„ ì‚¬ìš©
def __init__(self, scanner: RealtimeScanner): ...
```

### ìˆœí™˜ ì˜ì¡´ì„± í•´ì†Œ
```python
# âœ… ì¸í„°í˜ì´ìŠ¤ ì¶”ì¶œ (DIP)
# backend/core/interfaces/xxx.py
class ScoringStrategy(ABC):
    @abstractmethod
    def calculate_score(self, ...): ...
```

---

## 5. í¬ê¸° ì œí•œ (REFACTORING.md Â§8)

| ëŒ€ìƒ | ì œí•œ | ìœ„ë°˜ ì‹œ |
|------|------|--------|
| íŒŒì¼ | â‰¤ **1000ì¤„** | ë¶„í•  í•„ìˆ˜ |
| í´ë˜ìŠ¤ | â‰¤ **30 ë©”ì„œë“œ** | ë¶„í•  í•„ìˆ˜ |
| í´ë˜ìŠ¤ | â‰¤ **400ì¤„** | ë¶„í•  í•„ìˆ˜ |

---

## 6. ë°”í€´ ì¬ë°œëª… ê¸ˆì§€ (No Reinventing the Wheel)

> **ì›ì¹™**: ì§ì ‘ êµ¬í˜„ ì „ **ë°˜ë“œì‹œ** ê¸°ì¡´ ì†”ë£¨ì…˜ ê²€ìƒ‰. ë” ë¹ ë¥¸ ê¸¸ì´ ìˆìœ¼ë©´ ê·¸ ê¸¸ë¡œ.

### í•„ìˆ˜ ê²€ìƒ‰ í•­ëª©
| ê²€ìƒ‰ ëŒ€ìƒ | ê²€ìƒ‰ì²˜ | ì˜ˆì‹œ |
|-----------|--------|------|
| **ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤** | `grep_search`, `_index.md` | ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í´ë˜ìŠ¤/í•¨ìˆ˜ |
| ì•Œê³ ë¦¬ì¦˜/ë¡œì§ | PyPI, npm, GitHub | `finplot`, `pandas-ta` |
| UI ì»´í¬ë„ŒíŠ¸ | Qt ìœ„ì ¯, ì˜¤í”ˆì†ŒìŠ¤ | `QDarkStyleSheet` |
| ì¸í”„ë¼/íŒ¨í„´ | ê³µì‹ ë¬¸ì„œ, Stack Overflow | `ib_insync` ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ |

### ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤
```
1. **ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ ê²€ìƒ‰** (ìš°ì„ )
   - grep_searchë¡œ ìœ ì‚¬ ê¸°ëŠ¥ ê²€ìƒ‰
   - docs/_architecture/ ë¬¸ì„œ í™•ì¸
   - ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í´ë˜ìŠ¤/í•¨ìˆ˜ ì‹ë³„

2. **ì™¸ë¶€ ì†”ë£¨ì…˜ ê²€ìƒ‰**
   - PyPI / GitHub / Stack Overflow ê²€ìƒ‰ (ìµœì†Œ 3ê³³)

3. **ê²°ê³¼ ê¸°ë¡**
   - ë°œê²¬í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬/ì†”ë£¨ì…˜ ëª©ë¡
   - ì±„íƒ/ë¯¸ì±„íƒ ì‚¬ìœ 
   - ì—†ìœ¼ë©´ "ê²€ìƒ‰ ì™„ë£Œ, ì í•©í•œ ì†”ë£¨ì…˜ ì—†ìŒ" ëª…ì‹œ
```

### ê³„íšì„œ í…œí”Œë¦¿ ì¶”ê°€ í•­ëª©
```markdown
## X. ê¸°ì¡´ ì†”ë£¨ì…˜ ê²€ìƒ‰ ê²°ê³¼
| ì†”ë£¨ì…˜ | ì¶œì²˜ | ì±„íƒ ì—¬ë¶€ | ì‚¬ìœ  |
|--------|------|----------|------|
| (ì˜ˆì‹œ) finplot | PyPI | âœ… ì±„íƒ | PyQtGraphë³´ë‹¤ ê¸ˆìœµì°¨íŠ¸ íŠ¹í™” |
| (ì˜ˆì‹œ) mplfinance | PyPI | âŒ ë¯¸ì±„íƒ | Qt ì„ë² ë”© ë³µì¡ |
```

> âš ï¸ **ê²€ìƒ‰ ì—†ì´ ì§ì ‘ êµ¬í˜„ ì‹œì‘ = ê³„íšì„œ ë°˜ë ¤**

---

## 7. ì‚¬ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

ê³„íšì„œ ì‘ì„± ì „ **ë°˜ë“œì‹œ** í™•ì¸:

- [ ] ë ˆì´ì–´ ê·œì¹™ ìœ„ë°˜ ì—†ëŠ”ê°€? (Â§3)
- [ ] ì‹ ê·œ ì„œë¹„ìŠ¤ â†’ Container ë“±ë¡ ê³„íš ìˆëŠ”ê°€?
- [ ] ìˆœí™˜ ì˜ì¡´ì„± ìœ„í—˜ â†’ ì¸í„°í˜ì´ìŠ¤ ì¶”ì¶œ ê³„íš ìˆëŠ”ê°€?
- [ ] ê¸°ì¡´ 1000ì¤„+ íŒŒì¼ ìˆ˜ì • â†’ ë¶„í•  ì„ í–‰ í•„ìš”?

---

## 8. ê³„íšì„œ í…œí”Œë¦¿ (PRD êµ¬ì¡° + 2ë ˆë²¨ Task)

ê²½ë¡œ: `docs/Plan/{yy-mm-dd}/{hh-mm}_{phase}-{step}_{subtitle}.md`

ì˜ˆì‹œ: `docs/Plan/26-01-16/14-30_02-001_chart_refactor.md`

```markdown
# [{phase}-{step}] {subtitle} êµ¬í˜„ ê³„íšì„œ

> **ì‘ì„±ì¼**: YYYY-MM-DD HH:MM | **ì˜ˆìƒ**: Xh

## 1. ëª©í‘œ (PRD êµ¬ì¡°)

### 1.1 ë°°ê²½ (Problem)
- [í•´ê²°í•˜ë ¤ëŠ” ë¬¸ì œ]

### 1.2 ëª©í‘œ (Goal)
- [ë‹¬ì„±í•˜ë ¤ëŠ” ê²ƒ]

### 1.3 User Stories
- As a [ì‚¬ìš©ì], I want [ê¸°ëŠ¥] so that [ì´ìœ ]

### 1.4 Functional Requirements
1. ì‹œìŠ¤í…œì€ ~í•´ì•¼ í•œë‹¤
2. ì‹œìŠ¤í…œì€ ~í•´ì•¼ í•œë‹¤

### 1.5 Non-Goals (ë²”ìœ„ ì œì™¸)

> **ë‘ ê°€ì§€ ìœ í˜•ìœ¼ë¡œ êµ¬ë¶„í•˜ì—¬ ëª…ì‹œ**

#### ğŸš« Out of Scope (ì˜êµ¬ ì œì™¸)
> ì´ ì‘ì—…ì—ì„œ **ì ˆëŒ€ í•˜ì§€ ì•ŠëŠ” ê²ƒ**. ìŠ¤ì½”í”„ í¬ë¦½ ë°©ì§€ ëª©ì .
- âŒ [í•­ëª©] â€” [ì™œ ì œì™¸í•˜ëŠ”ì§€ ê°„ë‹¨í•œ ì´ìœ ]

#### â³ Deferred (í›„ì† ì‘ì—…ìœ¼ë¡œ ë¶„ë¦¬)
> **í•´ì•¼ í•˜ì§€ë§Œ ì§€ê¸ˆì€ ì•„ë‹˜**. ë³„ë„ ê³„íšì„œë¡œ ë¶„ë¦¬.
- â³ [í•­ëª©] â†’ **[XX-XXX]ì—ì„œ í•´ê²°** ë˜ëŠ” **ë³„ë„ ì‘ì—… ì˜ˆì •**

## 2. ë ˆì´ì–´ ì²´í¬
- [ ] ë ˆì´ì–´ ê·œì¹™ ìœ„ë°˜ ì—†ìŒ
- [ ] ìˆœí™˜ ì˜ì¡´ì„± ì—†ìŒ
- [ ] DI Container ë“±ë¡ í•„ìš”: ì˜ˆ/ì•„ë‹ˆì˜¤

## 3. ë³€ê²½ íŒŒì¼
| íŒŒì¼ | ìœ í˜• | ì˜ˆìƒ ë¼ì¸ |
|------|-----|----------|
|      |     |          |

## 4. Tasks (2ë ˆë²¨ ë¶„í•´)

> **ê·œì¹™**: ì™„ë£Œ ì‹œ `- [ ]` â†’ `- [x]`ë¡œ ë§ˆí‚¹

- [ ] 1.0 [Parent Task ì œëª©]
  - [ ] 1.1 [Sub-task ì„¤ëª…]
  - [ ] 1.2 [Sub-task ì„¤ëª…]
- [ ] 2.0 [Parent Task ì œëª©]
  - [ ] 2.1 [Sub-task ì„¤ëª…]

## 5. ê²€ì¦
- [ ] lint-imports
- [ ] pydeps --show-cycles
- [ ] pytest (í•´ë‹¹ ì‹œ)
```

## 9. ìŠ¹ì¸

**ë°˜ë“œì‹œ** ì‚¬ìš©ì ìŠ¹ì¸ í›„ ì½”ë“œ ì‘ì„±.

---

**ë‹¤ìŒ**: `/IMP-execution`