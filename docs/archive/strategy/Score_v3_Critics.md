0) 이 아키텍처의 장점(먼저 인정할 부분)

“조용한 매집 → 폭발 직전”이라는 패턴 가설을 4개 신호로 쪼개서 점수화한 건 설계가 깔끔합니다. 

Score_v3_complete_guide

각 신호를 0~1로 정규화하고 가중합으로 묶는 방식은 운영/튜닝이 쉽습니다. 

Score_v3_complete_guide

“4개 신호 모두 강하면 부스트” 같은 룰은 직관적으로 이해가 됩니다. 

Score_v3_complete_guide

여기까지는 “제품화 관점”에서 매우 좋습니다.

1) 시스템 레벨의 핵심 비판: ‘매집’의 정의가 애매하고, ‘폭발 직전’과 연결이 약합니다

문서 목적은 “매집 단계 종목 탐지”이고 컨셉은 “폭발 직전”입니다. 

Score_v3_complete_guide


하지만 현재 4개 신호는 대부분 (1) 변동성 축소, (2) 거래량 구조 변화, (3) 약한 상방 드리프트를 잡습니다. 

Score_v3_complete_guide

문제는:

변동성 축소 + 거래량 감소(VD) + 좁은 레인지(TR) 는 “폭발 직전”일 수도 있지만, 그냥 죽어가는(관심 소멸) 종목일 수도 있습니다. VD는 오히려 “관심 없음”을 신호로 쓰고 있는데(역발상), 그 자체가 실패 모드가 큽니다. 

Score_v3_complete_guide

“기관/세력 매집”까지 주장하려면 “누가 샀는지”에 대한 단서가 필요하지만, 이 설계는 기본적으로 가격/거래량의 형태만 봅니다(해석은 가능해도 ‘식별’은 어렵습니다). 

Score_v3_complete_guide

즉, 컨셉은 강한데, 지금 형태만으로는 “폭발 직전”과 “기관 매집”이 같은 점수로 뭉개질 위험이 있습니다.

2) 가장 위험한 설계 포인트: OBV Divergence의 “OBV 변화율 Z-score”

OBV Divergence는 (주가 변화율 Z)와 (OBV 변화율 Z)의 차이를 sigmoid로 정규화합니다. 

Score_v3_complete_guide

여기서 치명적인 함정이 생깁니다:

OBV는 누적값이라 “변화율”을 쓰는 순간, 분모(이전 OBV)가 작거나 부호가 바뀌는 구간에서 통계적으로 폭발/왜곡이 생기기 쉽습니다.

결과적으로 “다이버전스”가 아니라 지표 산술의 부작용이 점수에 크게 섞일 수 있습니다.

그리고 이 신호에 가중치가 35%로 가장 큽니다. 

Score_v3_complete_guide


→ 즉, OBV 파트가 흔들리면 전체 스코어가 같이 흔들릴 가능성이 큽니다.

요약하면: 아이디어는 맞는데, 현재 구현 선택(OBV ‘변화율’)이 신뢰성을 깎는 지점입니다.

3) “4개 신호의 독립성”이 낮아서, 가중치 합이 사실상 ‘중복 카운팅’이 될 수 있습니다

4개 신호는 각각 다른 이름이지만, 실제로는 같은 원인을 공유할 때가 많습니다.

TR(좁은 레인지) 

Score_v3_complete_guide

AB(조용한 날 비율/몸통 비율 등) 

Score_v3_complete_guide

VD(거래량 감소) 

Score_v3_complete_guide

이 셋은 종종 한꺼번에 같이 나타납니다. 그러면:

“정보 1개를 2~3번 세는 효과”가 생겨서,

특정 상황(예: 장기간 횡보, 유동성 감소)이 과도하게 고득점이 되는 편향이 생깁니다.

즉, 설계는 4팩처럼 보이지만 실제론 **2팩(압축/볼륨 구조)**에 가까워질 수 있습니다.

4) Sigmoid 정규화의 함정: 0~1이 ‘확률’처럼 보이는 착시

문서의 여러 파트가 “Z-score → Sigmoid로 0~1” 구조입니다. 

Score_v3_complete_guide


이건 제품화에 좋지만, 운영 관점에서 함정이 있습니다.

sigmoid는 분포가 조금만 바뀌어도 값이 0이나 1로 쉽게 포화됩니다.

그러면 “0.8 이상이면 강한 매집” 같은 해석이, 시장 레짐/종목군이 바뀌는 순간 의미가 쉽게 변질됩니다. 

Score_v3_complete_guide

특히 거래량/변동성은 fat-tail이라 단순 Z-score가 안정적이지 않은 경우가 많습니다.

결론: 정규화는 좋은데, “Z→sigmoid”는 레짐 변화에 취약할 가능성이 큽니다.

5) Signal Modifier(올스타 1.30x)의 구조적 리스크

문서는 “4개 신호 모두 ≥ 0.6이면 1.30x 부스트”를 줍니다. 

Score_v3_complete_guide

비판 포인트는 두 가지입니다.

(1) 독립성이 낮으면 ‘부스트’가 사실상 중복 보상

앞서 말했듯 신호들이 같이 움직이면, 0.6 동시 달성이 생각보다 자주 나옵니다. 그러면 부스트는 **추가 정보가 아니라 ‘상관관계 보상’**이 됩니다.

(2) 점수 스케일이 깨질 수 있음

Base Score는 0~100 스케일인데 

Score_v3_complete_guide

, 1.30x를 곱하면 최대 130까지 갈 수 있습니다.
그런데 점수 해석 표는 80+ 같은 기준으로 운영합니다. 

Score_v3_complete_guide


→ “100을 넘는 점수”를 어떻게 해석할지(클리핑? 리스케일?)가 문서상 불명확합니다. 이게 실전에서 은근히 혼란을 만듭니다.

6) Volume Dryout의 “Support 이탈 시 0점”은 너무 불연속적입니다

VD는 “거래량 감소”를 보다가, “하방 경직성 체크(서포트 이탈 시 0점)”이 들어갑니다. 

Score_v3_complete_guide

이 설계는 방향은 맞습니다(죽은 종목 걸러내기). 다만:

서포트 정의가 애매하면(기간/기준/갭 처리), 작은 노이즈로 점수가 0으로 붕괴합니다.

불연속 규칙은 점수의 안정성을 해치고, 최종 랭킹을 흔듭니다.

7) “가중치(35/30/20/15)”는 합리적 근거가 없으면 가장 먼저 무너지는 부분

가중치는 문서에서 고정으로 제시되어 있습니다. 

Score_v3_complete_guide


이게 나쁜 건 아니지만, 비판적으로 보면:

레짐/종목군/유동성 수준에 따라 “어떤 신호가 더 예측력이 있는지”가 바뀌는데,

고정 가중치는 결국 특정 시장 국면에서만 잘 맞는 모델이 되기 쉽습니다.

최종 평가(한 문장)

이 설계는 “조용한 압축 + 거래량 구조”를 찾는 훌륭한 휴리스틱 스캐너지만, 현재 형태로는

OBV 변화율 기반 다이버전스의 수학적 불안정,

신호 간 중복으로 인한 과대평가,

sigmoid/threshold가 레짐에 취약,

‘기관 매집’과 ‘그냥 무관심’의 구분력 부족
이 4가지 때문에 “폭발 직전 탐지기”로 운용할 때 **거짓 양성(remember: 죽은 압축, 잡음 압축)**이 꽤 나올 가능성이 큽니다. 

Score V3.2 (리디자인) — “Quiet Accumulation Scanner, Stable & Calibratable”
1) 설계 목표 (V3.1 대비 개선 포인트)

V3.1의 핵심 컨셉은 유지합니다: “조용한 매집 → 폭발 직전 탐지” 

Score_v3_complete_guide

다만 V3.2는 다음 4가지를 해결하는 게 목표입니다.

OBV Divergence의 수학적 불안정 제거
(누적값 OBV의 “변화율” 기반 Z-score를 폐기) 

Score_v3_complete_guide

TR/AB/VD의 중복 카운팅 완화

0~1이 확률처럼 보이는 착시 최소화
(sigmoid는 유지 가능하되 “캘리브레이션/분위수 기반”으로 안정화)

VD의 ‘Support 이탈 = 0점’ 불연속 규칙을 연속 페널티로 변경 

Score_v3_complete_guide

2) 전체 파이프라인 (스캐너/실행 분리)

V3.2는 “선별(스캐너)”과 “진입(트리거)”를 분리합니다.

(A) Accumulation Score (0~100): “지금 축적(흡수/압축)이 진행 중인가?”

(B) Activation Trigger (별도): “이제 깨어났는가?”(거래량/가격 확장, 돌파 등)

V3.x의 점수는 원래 ‘폭발 임박’ 해석까지 하려 했지만 

Score_v3_complete_guide

, 점수만으로 ‘임박’을 강하게 라벨링하면 거짓양성이 커집니다. 따라서 V3.2는 점수는 축적, 트리거는 임박을 담당하게 만듭니다.

3) 스코어 합성 공식 (가중치는 유지, 해석만 안정화)

가중치/합성식은 그대로 둡니다. 

Score_v3_complete_guide

Base = (TR×0.30 + OBV×0.35 + AB×0.20 + VD×0.15) × 100 

Score_v3_complete_guide

Final = clip_0_100( Base + HarmonyBonus - RedundancyPenalty )

핵심 변경: V3.1의 Final = Base × 1.30 같은 곱셈 부스트는 “100을 넘는 스코어/스케일 붕괴”를 부를 수 있으니 

Score_v3_complete_guide

, V3.2는 (1) 0~100 클리핑을 기본으로, (2) 부스트는 ‘가산 보너스’로 바꿉니다.

4) 개별 신호 리디자인 (최소 변경, 최대 안정화)
4.1 OBV Divergence → “Absorption (Signed Volume vs Price Impact)”로 재정의 (35%)

V3.1은 “주가 변화율 Z”와 “OBV 변화율 Z” 차이를 sigmoid로 정규화합니다. 

Score_v3_complete_guide


여기서 **OBV ‘변화율’**이 가장 위험합니다(누적값 분모 이슈).

V3.2 제안 (핵심 아이디어 유지, 산술만 교체)

OBV는 ‘누적 지표’로 쓰되, 신호는 ΔOBV(= signed volume) 기반으로 뽑습니다.

즉 “누군가 사고 있는데(거래량/체결 압력) 가격이 덜 움직이면 흡수(매집) 가능성↑”을 직접 계산합니다.

(A) Signed Volume 구성 (OBV의 대체 입력)

sv_t = sign(r_t) * V_t
(r_t: 수익률/로그수익률, V_t: 거래량)

(B) “거래량 대비 가격 반응”을 보는 Divergence

SV = sum(sv_t, t∈window N) (누적 OBV 전체가 아니라 최근 N 구간 누적)

PR = sum(|r_t|, t∈window N) (같은 구간의 가격 변동 총량)

핵심 신호

D_raw = Z_robust(SV_norm) - Z_robust(PR_norm)

여기서 SV_norm은 “그 종목의 평소 거래량 스케일”로 정규화(예: N구간 median volume 등)해서 종목별 규모 차이를 누릅니다.

(C) 정규화(0~1)

V3.1처럼 Z→sigmoid도 가능하지만(설정 파라미터가 문서에 존재) 

Score_v3_complete_guide

, V3.2는 운영 안정성을 위해 아래를 권합니다.

기본: OBV = percentile_rank(D_raw, trailing 252)
→ 0~1이지만 “확률”이 아니라 **분위수(상대적 강도)**로 해석 가능

결과적으로 “OBV 다이버전스”라는 컨셉은 유지하면서, ‘OBV 변화율’의 폭발/왜곡 위험을 제거합니다.

4.2 Tight Range (30%) — 정의는 유지, 정규화만 안정화

V3.1 정의(최근 5일 HL/Close 평균 vs 과거 20일 비교, Z→sigmoid)는 합리적입니다. 

Score_v3_complete_guide


다만 V3.2는 Z-score를 robust로(median/MAD 또는 winsorized z) 바꿉니다.

TR_raw: 기존과 동일

TR: percentile_rank(TR_raw, trailing 252) 권장
(또는 robust z → sigmoid)

4.3 Accumulation Bar (20%) — “Base 0.5 + 가감점” 구조는 유지, 중복 줄이기

V3.1의 AB는 “양봉비율/조용한 날/몸통비율/거래량 중앙값”을 조합합니다. 

Score_v3_complete_guide


문제는 TR/VD와 겹치는 항목이 있어 AB가 “압축을 또 세는” 경우가 잦다는 점입니다.

V3.2 최소 수정

AB에서 “조용한 날 비율(변동 2% 이하)”은 TR과 상관이 너무 큼 

Score_v3_complete_guide


→ 가중을 낮추거나, 정의를 바꿔 “조용한데 위로 감기는지”를 보게 합니다.

예:

“조용한 날” 자체가 아니라, 조용한 날의 종가 위치(상단 마감) 비율을 사용
(레인지 상단에서 마감이 누적되면 ‘흡수 후 위로 밀림’ 쪽으로 기울어짐)

AB는 여전히 “0.5 + 가감” 구조를 유지하되 

Score_v3_complete_guide

, TR/VD와 중복되는 ‘조용함’은 덜 세고, ‘방향성 있는 조용함’을 더 셉니다.

4.4 Volume Dryout (15%) — Support 이탈 0점 → 연속 페널티로

V3.1은 VD 계산에 “Support 이탈 시 0점”이 들어갑니다. 

Score_v3_complete_guide


이건 의도는 좋지만(죽은 종목 제거) 점수가 너무 불연속입니다.

V3.2 변경

VD_raw는 동일(최근 N일 거래량 중앙값 vs 과거 20일 평균 비율) 

Score_v3_complete_guide

Support 페널티를 “0으로 드랍”이 아니라 거리 기반 연속 페널티로 변경

예:

support_dist = (Close - Support) / ATR

support_penalty = sigmoid(k * support_dist)

Close가 Support 아래로 조금만 내려가면 “조금” 깎이고,

크게 이탈하면 “많이” 깎임

최종:

VD = VD_base * support_penalty

5) Modifier 리디자인 (스케일 보존)

V3.1은 “4개 모두 ≥0.6이면 1.30x”입니다. 

Score_v3_complete_guide


V3.2는 같은 정신을 가산 보너스로 구현합니다.

5.1 HarmonyBonus (동시강함 보상)

m = min(OBV, TR, AB, VD)

HarmonyBonus = B * relu(m - 0.6)
(B는 예: 0~15점 스케일로 캘리브레이션)

→ “다 같이 강한 상태”는 보상하되, 최종 점수는 항상 0~100 클립합니다.

5.2 RedundancyPenalty (죽은 압축/중복 카운팅 억제)

가장 흔한 거짓양성은 “압축은 아름답지만 수요/흡수가 없다(OBV 약함)”입니다.

Compression = mean(TR, AB, VD)

RedundancyPenalty = P * relu(Compression - OBV - δ)

해석:

TR/AB/VD가 높아도 OBV(흡수)가 못 따라오면 “그냥 조용히 죽는 중”일 수 있으니 점수를 깎습니다.

일단 무시! 6) Activation Trigger (별도 모듈, 진입/알림용) >>> Ignition score 대체할 수 있을지 생각해볼 것!

이건 “스코어”가 아니라 “이제 움직이기 시작했다” 트리거입니다.

후보군: FinalScore가 상위(예: 분위수 상위 5% 또는 80+) 

Score_v3_complete_guide

트리거 조건(예시):

(1) 가격이 최근 TR 상단/저항을 이탈(상방)

(2) 거래량이 최근 중앙값 대비 확장(Volume Expansion)

(3) 스프레드/체결환경 악화 시 무시(실행 리스크)

이렇게 하면 “축적 점수는 높지만 아직 안 깨어난 종목”을 억지로 ‘폭발 임박’이라 오판하는 빈도를 크게 줄입니다.

7) 운영 가이드 (해석 방식 변경)

V3.1의 “0.8+ 강한 매집” 같은 해석은 유지할 수 있지만 

Score_v3_complete_guide

, V3.2부터는 아래처럼 바꾸는 걸 추천드립니다.

OBV/TR/AB/VD의 0~1은 ‘확률’이 아니라 ‘강도(분위수)’

최종 점수 80+는 “임박”이 아니라
**“축적 상태 최상위권 + 트리거 관찰 필요”**로 의미를 바꿉니다.

8) 검증(필수) — 이 구조가 진짜 ‘알파’인지 확인하는 법

V3.2는 “안정성”을 올린 설계입니다. 하지만 알파 여부는 검증이 필요합니다.

(A) 후행 1~5일/또는 30~180분 최대상승폭의 분포가 상위 스코어에서 우월한가?

(B) “Activation Trigger”를 붙였을 때 승률/기대값이 개선되는가?

(C) 거짓양성(죽은 압축) 케이스를 모아서 RedundancyPenalty가 실제로 깎는가?

(D) 레짐별(고변동/저변동, 테마장/무테마) 성능이 유지되는가?