# Dynamic Signal Modifier: ë°°ìˆ˜ ë²”ìœ„ ë° ìˆ˜ì‹ ì„¤ê³„

> **ì‘ì„±ì¼**: 2026-01-06  
> **ëª©ì **: Boost/Penalty í†µí•© ì‹œ ìµœì  ë°°ìˆ˜ ë²”ìœ„ ë° ê³„ì‚° ê³µì‹ ë…¼ì˜

---

## 1. ë¬¸ì œ ì •ì˜

### í˜„ì¬ ì‹œìŠ¤í…œ
| ì¡°ê±´ | ë°°ìˆ˜ | ë¬¸ì œì  |
|------|------|--------|
| Boost (TRâ‰¥0.7, VDâ‰¥0.5) | **1.3x** | ê³ ì •ê°’, ì¡°ê±´ ì¶©ì¡± ì‹œ ì¦‰ì‹œ ì í”„ |
| Signal Penalty (any < 0.1) | **0.7x** | ê³ ì •ê°’, í•˜ë‚˜ë§Œ ë‚®ì•„ë„ ë™ì¼ í˜ë„í‹° |

### ìš”êµ¬ì‚¬í•­
- 4ê°œ ìš”ì†Œê°€ **ëª¨ë‘ ê°•í•  ë•Œ** ìµœëŒ€ ë°°ìˆ˜
- 4ê°œ ìš”ì†Œê°€ **ëª¨ë‘ ì•½í•  ë•Œ** ìµœì†Œ ë°°ìˆ˜
- **ê·¸ë¼ë°ì´ì…˜** ìˆëŠ” ë™ì  ê³„ì‚°

---

## 2. ë°°ìˆ˜ ë²”ìœ„ ë¶„ì„

### ê·¹ë‹¨ì  ë²”ìœ„ (0.1 ~ 1.5)
| ì¥ì  | ë‹¨ì  |
|------|------|
| ê°•í•œ ì°¨ë³„í™” | Overfitting ìœ„í—˜ |
| ìµœìƒìœ„ ì¢…ëª© ë¶€ê° | ì‘ì€ ë³€ë™ì— ë¯¼ê° |
| | ì ìˆ˜ ë¶„í¬ ì™œê³¡ |

### ë³´ìˆ˜ì  ë²”ìœ„ (0.8 ~ 1.2)
| ì¥ì  | ë‹¨ì  |
|------|------|
| ì•ˆì •ì  | ì°¨ë³„í™” ë¶€ì¡± |
| Overfitting ë°©ì§€ | ê·¹ë‹¨ ì¼€ì´ìŠ¤ êµ¬ë¶„ ì–´ë ¤ì›€ |

### ê¶Œì¥ ë²”ìœ„: **0.6 ~ 1.4**
```
ìµœì†Œ: 0.6 (40% ì‚­ê°) - 4ê°œ ì¤‘ 3ê°œ ì´ìƒ < 0.2
ìµœëŒ€: 1.4 (40% ì¦ê°€) - 4ê°œ ëª¨ë‘ â‰¥ 0.7
ì¤‘ë¦½: 1.0 - í‰ê· ì ì¸ ì‹ í˜¸
```

**ê·¼ê±°**:
- Â±40%ëŠ” ì˜ë¯¸ ìˆëŠ” ì°¨ì´ë¥¼ ë§Œë“¤ì§€ë§Œ ê·¹ë‹¨ì ì´ì§€ ì•ŠìŒ
- Base Score 50ì  ê¸°ì¤€: 30ì (Ã—0.6) ~ 70ì (Ã—1.4)

---

## 3. ìˆ˜ì‹ ì„¤ê³„

### Option A: í‰ê·  ê¸°ë°˜ ì„ í˜•
```python
avg = mean(intensities)  # 0.0 ~ 1.0
modifier = 0.6 + (avg * 0.8)  # 0.6 ~ 1.4
```
- âœ… ë‹¨ìˆœ
- âŒ í•˜ë‚˜ë§Œ ë†’ì•„ë„ í‰ê·  ì˜¬ë¼ê° (ì·¨ì•½ì  ë¬´ì‹œ)

### Option B: ê¸°í•˜í‰ê·  ê¸°ë°˜
```python
product = tight * obv * accum * dryout
geo_mean = product ** 0.25  # 0.0 ~ 1.0
modifier = 0.6 + (geo_mean * 0.8)
```
- âœ… í•˜ë‚˜ë¼ë„ 0ì´ë©´ ì „ì²´ 0
- âŒ ë„ˆë¬´ ê°€í˜¹ (0.05ë§Œ ìˆì–´ë„ í° í˜ë„í‹°)

### Option C: ê°€ì¤‘ í‰ê·  + ìµœì†Œê°’ ë³´ì • â­ (ê¶Œì¥)
```python
avg = mean(intensities)
min_val = min(intensities)

# ìµœì†Œê°’ì´ ë‚®ìœ¼ë©´ avgì—ì„œ ì°¨ê°
penalty_factor = max(0, 0.3 - min_val) * 2  # 0 ~ 0.6
adjusted_avg = avg - penalty_factor

modifier = 0.6 + (adjusted_avg * 0.8)
modifier = clamp(modifier, 0.6, 1.4)
```
- âœ… í‰ê·  ê³ ë ¤ + ì·¨ì•½ì  í˜ë„í‹°
- âœ… ë°¸ëŸ°ìŠ¤ ìˆìŒ

### Option D: ì¡°ê±´ë¶€ ë‹¨ê³„ + ì—°ì† í•¨ìˆ˜
```python
avg = mean(intensities)
min_val = min(intensities)
count_strong = sum(1 for v in intensities if v >= 0.7)  # ê°•í•œ ì‹ í˜¸ ê°œìˆ˜

if min_val < 0.1:
    # í˜ë„í‹° ëª¨ë“œ
    modifier = 0.6 + (avg * 0.4)  # 0.6 ~ 1.0
elif count_strong >= 3:
    # ë¶€ìŠ¤íŠ¸ ëª¨ë“œ
    modifier = 1.0 + (avg - 0.5) * 0.8  # 1.0 ~ 1.4
else:
    # ì¤‘ë¦½ ëª¨ë“œ
    modifier = 0.8 + (avg * 0.4)  # 0.8 ~ 1.2
```
- âœ… ëª…í™•í•œ ì¡°ê±´ ë¶„ê¸°
- âœ… ëª¨ë“œë³„ ë‹¤ë¥¸ ìŠ¤ì¼€ì¼

---

## 4. ì‹œë®¬ë ˆì´ì…˜ ì˜ˆì‹œ

| ì‹ í˜¸ (TR, OBV, AB, VD) | avg | min | Option C | Option D |
|------------------------|-----|-----|----------|----------|
| (0.9, 0.9, 0.8, 0.9) | 0.88 | 0.8 | **1.30** | **1.30** |
| (0.7, 0.7, 0.5, 0.7) | 0.65 | 0.5 | **1.12** | **1.12** |
| (0.5, 0.5, 0.5, 0.5) | 0.50 | 0.5 | **1.00** | **1.00** |
| (0.6, 0.0, 0.4, 0.3) | 0.33 | 0.0 | **0.66** | **0.73** |
| (0.1, 0.05, 0.1, 0.0) | 0.06 | 0.0 | **0.60** | **0.62** |

---

## 5. ê¶Œì¥ì•ˆ

### ìµœì¢… ê³µì‹: Option C ë³€í˜•
```python
def calculate_signal_modifier(intensities: dict) -> float:
    values = list(intensities.values())
    avg = sum(values) / len(values)
    min_val = min(values)
    
    # ì·¨ì•½ì  í˜ë„í‹°: min < 0.3ì´ë©´ ì°¨ê°
    weakness_penalty = max(0, 0.3 - min_val) * 1.5
    adjusted = avg - weakness_penalty
    
    # 0.6 ~ 1.4 ë²”ìœ„ë¡œ ë§¤í•‘
    modifier = 0.6 + (adjusted * 0.8)
    return max(0.6, min(1.4, modifier))
```

### ë²”ìœ„ ìš”ì•½
| ìƒíƒœ | ì˜ˆì‹œ | Modifier |
|------|------|----------|
| ğŸ”¥ ì˜¬ìŠ¤íƒ€ | ëª¨ë‘ â‰¥ 0.8 | 1.3 ~ 1.4 |
| âœ… ê°•í•¨ | avg â‰¥ 0.6, min â‰¥ 0.3 | 1.1 ~ 1.3 |
| â– ì¤‘ë¦½ | avg ~0.5 | 0.9 ~ 1.1 |
| âš ï¸ ì·¨ì•½ì  | min < 0.2 | 0.7 ~ 0.9 |
| âŒ ë§¤ìš° ì•½í•¨ | avg < 0.3, min < 0.1 | 0.6 ~ 0.7 |

---

## 6. ê²°ë¡ 

**ê¶Œì¥ ë²”ìœ„**: `0.6 ~ 1.4` (Â±40%)  
**ê¶Œì¥ ê³µì‹**: Option C (í‰ê·  + ìµœì†Œê°’ ë³´ì •)

> [!IMPORTANT]
> ì‹¤ì œ ë°ì´í„°ë¡œ ë°±í…ŒìŠ¤íŠ¸ í›„ ë²”ìœ„ ì¡°ì • ê°€ëŠ¥
