# Sigma9 ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> **ë²„ì „**: v3.0 (2026-01-07)  
> **ì² í•™**: "Detect the Accumulation, Strike the Ignition, Harvest the Surge."

---

## 1. ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ‡ºğŸ‡¸ AWS EC2 (us-east-1)                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     Trading Engine Server                         â”‚  â”‚
â”‚  â”‚  Strategy Engine (Scanning + Trading) â”‚ IBKR Gateway (TWS)        â”‚  â”‚
â”‚  â”‚  LLM Oracle          â”‚ Risk Manager    â”‚ FastAPI + WebSocket      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â–²
                                     â”‚ WebSocket (Data Push) / REST (Commands)
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ‡°ğŸ‡· Local Client (Windows)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PyQt6 GUI Dashboard + pyqtgraph Charts                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Tech Stack

### 2.1 Backend (AWS EC2)

| Component | Library | Purpose |
|-----------|---------|---------|
| API Server | `FastAPI` + `uvicorn` | REST + WebSocket ì„œë²„ |
| Broker | `ib_insync` | IBKR ì—°ë™, OCA ì£¼ë¬¸ |
| Market Data | Massive.com (WebSocket + REST) | Universe + ì‹¤ì‹œê°„ |
| Data Analysis | `pandas` + `pandas_ta` | OBV, ATR, VWAP |
| LLM | `openai` / `anthropic` / `google` | í•´ì„¤ ë° ë¶„ì„ |
| Database | `SQLAlchemy` + SQLite (WAL) | ë¹„ë™ê¸° ORM |
| Logging | `loguru` | JSON Structured Logging |

### 2.2 Frontend (Local Windows)

| Component | Library | Purpose |
|-----------|---------|---------|
| GUI | `PyQt6` + `qfluentwidgets` | Glassmorphism ëŒ€ì‹œë³´ë“œ |
| Charts | `pyqtgraph` | ê³ ì„±ëŠ¥ ë„¤ì´í‹°ë¸Œ ì°¨íŠ¸ |
| HTTP | `httpx` | REST í´ë¼ì´ì–¸íŠ¸ |
| WebSocket | `websockets` | ì‹¤ì‹œê°„ ë°ì´í„° ìˆ˜ì‹  |
| Async | `qasync` | PyQt + asyncio í†µí•© |

---

## 3. ë°ì´í„° íŒŒì´í”„ë¼ì¸

```mermaid
flowchart TB
    subgraph External["ğŸ“¡ External"]
        MASSIVE["Massive.com WebSocket"]
        IBKR["IBKR TWS (ì£¼ë¬¸ ì „ìš©)"]
    end

    subgraph Backend["âš™ï¸ Backend"]
        WS_CLIENT["MassiveWebSocketClient"]
        TICK_BROADCAST["TickBroadcaster"]
        SCANNER["RealtimeScanner"]
        STRATEGY["SeismographStrategy"]
    end

    subgraph Frontend["ğŸ–¥ï¸ Frontend"]
        DASHBOARD["Dashboard"]
        CHART["PyQtGraphChart"]
    end

    MASSIVE -->|"AM.*/T.*"| WS_CLIENT
    WS_CLIENT --> TICK_BROADCAST
    TICK_BROADCAST -->|"GUI WS"| DASHBOARD
    TICK_BROADCAST -->|"dispatch"| STRATEGY
    SCANNER --> STRATEGY
    DASHBOARD --> CHART
```

| Phase | íë¦„ | ê°±ì‹  ì£¼ê¸° |
|-------|------|----------|
| Tier 1 Watchlist | Massive AM â†’ 1ë¶„ë´‰ | 1ë¶„/5ë¶„ |
| Tier 2 Hot Zone | Massive T â†’ í‹± | 1ì´ˆ |
| Chart | Massive AM â†’ OHLC | ì‹¤ì‹œê°„ |

---

## 4. ëª¨ë“ˆ êµ¬ì¡°

```
Sigma9-0.1/
â”œâ”€â”€ backend/                          # â† AWS ë°°í¬
â”‚   â”œâ”€â”€ server.py                     # FastAPI ë©”ì¸ ì„œë²„
â”‚   â”œâ”€â”€ core/                         # ì „ëµ ì—”ì§„, ë¦¬ìŠ¤í¬ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ strategy_base.py          # ì „ëµ ì¶”ìƒ ì¸í„°í˜ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ realtime_scanner.py       # ì‹¤ì‹œê°„ ìŠ¤ìºë„ˆ
â”‚   â”‚   â”œâ”€â”€ tick_broadcaster.py       # Massive WS â†’ GUI ë¸Œë¦¿ì§€
â”‚   â”‚   â””â”€â”€ trailing_stop.py          # íŠ¸ë ˆì¼ë§ ìŠ¤íƒ‘
â”‚   â”œâ”€â”€ strategies/                   # ì „ëµ í”ŒëŸ¬ê·¸ì¸
â”‚   â”‚   â””â”€â”€ seismograph.py            # ë©”ì¸ ì „ëµ
â”‚   â”œâ”€â”€ data/                         # DB, API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ polygon_client.py         # Massive REST
â”‚   â”‚   â””â”€â”€ massive_ws_client.py      # Massive WebSocket
â”‚   â”œâ”€â”€ broker/                       # IBKR ì—°ë™
â”‚   â””â”€â”€ api/                          # REST/WebSocket í•¸ë“¤ëŸ¬
â”‚
â”œâ”€â”€ frontend/                         # â† ë¡œì»¬ Windows
â”‚   â”œâ”€â”€ gui/                          # ëŒ€ì‹œë³´ë“œ, ì°¨íŠ¸
â”‚   â””â”€â”€ services/                     # Backend í†µì‹ 
â”‚
â””â”€â”€ docs/
    â””â”€â”€ context/                      # ğŸ“˜ í•µì‹¬ ì •ì±… ë¬¸ì„œ
        â”œâ”€â”€ ARCHITECTURE.md           # (ì´ ë¬¸ì„œ)
        â”œâ”€â”€ REFACTORING.md
        â””â”€â”€ strategy/
            â”œâ”€â”€ seismograph.md
            â”œâ”€â”€ mep.md
            â””â”€â”€ ignition.md
```

---

## 5. 3-Phase Trading Cycle

```
[Phase 1: Setup]        [Phase 2: Trigger]       [Phase 3: Harvest]
     â†“                        â†“                        â†“
  ì¼ë´‰ ìŠ¤ìº” â”€â”€â†’ Watchlist 50 â”€â”€â†’ ì‹¤ì‹œê°„ ê°ì‹œ â”€â”€â†’ ì§„ì… â”€â”€â†’ ì²­ì‚°
  (ë§¤ì§‘ íƒì§€)    (ìƒìœ„ ì„ ë³„)      (í­ë°œ ê°ì§€)     (OCA)    (Trail)
```

| Phase | ì—­í•  | ìƒì„¸ ë¬¸ì„œ |
|-------|------|----------|
| Phase 1 | ë§¤ì§‘ íƒì§€ â†’ Watchlist ì„ ì • | [seismograph.md](strategy/seismograph.md) |
| Phase 2 | í­ë°œ ê°ì§€ â†’ ì§„ì… ê²°ì • | [ignition.md](strategy/ignition.md) |
| Phase 3 | ìˆ˜ìµ ì‹¤í˜„ + ì¬ì§„ì… | [mep.md](strategy/mep.md) |

---

## 6. Tiered Watchlist System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WATCHLIST PANEL                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš¡ TIER 2 - HOT ZONE (Tick-level, 1ì´ˆ ê°±ì‹ )             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ AAPL  $178.25  ğŸ”¥85  +3.2%  Z:V+2.1 Z:P+0.3        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“‹ TIER 1 - WATCHLIST (1ë¶„/5ë¶„ ê°±ì‹ )                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ MSFT   +1.2%  [100]  ğŸ”¥45   560K                   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. API Endpoints

```
REST:
  GET  /api/watchlist          - Watchlist ì¡°íšŒ
  GET  /api/positions          - í˜„ì¬ í¬ì§€ì…˜
  POST /api/kill-switch        - ê¸´ê¸‰ ì •ì§€
  POST /api/order              - ìˆ˜ë™ ì£¼ë¬¸
  GET  /api/strategies         - ì „ëµ ëª©ë¡

WebSocket:
  WS /ws/market               - ì‹¤ì‹œê°„ ì‹œì¥ ë°ì´í„°
  WS /ws/trade                - ê±°ë˜ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼
```

---

## 8. Risk Management

| Parameter | Value | Action |
|-----------|-------|--------|
| Max Position Size | Kelly Ã— 0.5 | Half Kelly |
| Max Concurrent | 3ê°œ | ë™ì‹œ í¬ì§€ì…˜ ì œí•œ |
| **Per-Trade Stop** | **-5.0%** | OCA Stop Loss |
| Daily Loss Limit | -3% | ë´‡ ìë™ ì •ì§€ |
| Weekly Loss Limit | -10% | ìˆ˜ë™ ë¦¬ë·° í•„ìš” |

---

## 9. ê´€ë ¨ ë¬¸ì„œ

- [@PROJECT_DNA.md](../../@PROJECT_DNA.md) - í”„ë¡œì íŠ¸ ì§„ì…ì 
- [REFACTORING.md](REFACTORING.md) - ë¦¬íŒ©í„°ë§ ì •ì±…
- [strategy/](strategy/) - ì „ëµë³„ ìƒì„¸ ë¬¸ì„œ
