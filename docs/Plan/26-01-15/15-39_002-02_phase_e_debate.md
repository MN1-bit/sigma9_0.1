# 002-02: Phase E 전략 토론 - 금융공학 vs 실전 단타

> **문서 번호**: 002-02  
> **작성일**: 2026-01-15  
> **참여자**: 
> - 🎓 **Q** (Quant) - 금융공학 박사, 헤지펀드 15년
> - 🔥 **T** (Trader) - 단타 전업 8년, 연수익률 300%+

---

## 1. 다중공선성 제거 논쟁

### 🎓 Q의 초기 제안

> "RSI_14와 RSI_5는 상관계수 0.95 이상입니다. 
> 다중공선성은 모델 해석을 방해하고 과적합을 유발합니다.
> 상관계수 0.9 이상인 피처는 제거해야 합니다."

### 🔥 T의 반박

> "잠깐. 실전에서 RSI_14가 40인데 RSI_5가 70이면?
> 
> 그건 **단기 과열 + 중기 아직 여력** 시그널이야.
> 바로 이 '괴리'가 진입 타이밍이거든.
> 
> 다중공선성 제거하면 이런 알파 다 날아가."

### 🎓 Q의 재반박

> "그렇다면 두 지표의 차이를 새 피처로 만들면 되지 않나요?
> `rsi_divergence = RSI_5 - RSI_14`"

### 🔥 T의 수정 동의

> "오, 그거 좋네. 그럼 이렇게 하자:
> - 원본 제거 ❌
> - **괴리 피처 추가** ✅ (`rsi_5_14_div`, `macd_signal_div` 등)"

### ✅ **합의**: 다중공선성 제거 **삭제**, 괴리 피처 **추가**

---

## 2. 일봉 vs 분봉 지표 논쟁

### 🎓 Q의 초기 제안

> "130개 지표를 일봉과 분봉 모두에서 계산하면 260개 피처.
> 분봉에서 RSI 계산해도 노이즈만 늘어납니다."

### 🔥 T의 반박

> "분봉 RSI가 노이즈? 농담하냐?
> 
> 급등 직전 10분간 RSI가 80 찍고 내려오는 게 전형적인 '첫 펀치' 패턴이야.
> 일봉에선 이거 절대 안 잡혀.
> 
> **분봉 지표 ≠ 일봉 지표의 단순 세분화**"

### 🎓 Q의 질문

> "그렇다면 어떤 분봉 지표가 실제로 유의미한가요?"

### 🔥 T의 경험 기반 제안

> 1. **분봉 RSI 스파이크** - T0 직전 80 돌파 후 하락
> 2. **분봉 VWAP 위치** - 가격이 VWAP 위에서 얼마나 버티나
> 3. **분봉 거래량 가속** - 후반 5분 vs 전반 5분 비율
> 4. **분봉 스프레드 축소** - 돌파 직전 스프레드 작아짐

### 🎓 Q의 제안

> "그럼 분봉에서는 130개 전체 대신 **핵심 20개**만 계산하고,
> 대신 **시간 윈도우별로 분리**하면 어떨까요?
> 
> - `rsi_5_last_15m` (T0 직전 15분)
> - `rsi_5_last_60m` (T0 직전 60분)
> - `rsi_5_delta_15m_60m` (변화율)"

### 🔥 T의 동의

> "그거 좋네. 윈도우별 변화가 핵심이지."

### ✅ **합의**: 분봉은 **핵심 20개 × 4개 윈도우 = 80개**, 괴리 피처 추가

---

## 3. 과적합 방지 논쟁

### 🎓 Q의 초기 제안

> "5,000 샘플에 200개 피처는 과적합 위험이 높습니다.
> SelectKBest로 상위 30개만 선택 후 학습 권장."

### 🔥 T의 반박

> "잠깐. 네가 말한 'mutual_info_classif'는 **선형 관계**만 보는 거 아냐?
> 
> 내 경험상 급등 신호는 **비선형 조합**이야:
> - RSI < 30 AND RVOL > 5x AND ATR_percentile < 20%
> 
> 단일 피처로는 중요도 낮아 보여도, 조합하면 알파야."

### 🎓 Q의 인정

> "맞는 말입니다. 그럼 **XGBoost의 내장 정규화**에 의존하고,
> 사후에 SHAP로 조합 효과를 분석하는 게 나을 수 있겠네요."

### 🔥 T의 제안

> "그리고 하나 더. TimeSeriesSplit은 좋은데, 
> **시장 레짐 분리**도 해야 해.
> 
> 2021년 밈스탁 광풍이랑 2023년 정상 시장이랑 패턴이 완전 달라.
> 섞어서 학습하면 쓰레기 나와."

### 🎓 Q의 동의 -> 일단 "차후 구현"으로 분류

> "그럼 이렇게 하죠:
> 1. 연도별 레짐 라벨링 (BULL / NORMAL / BEAR)
> 2. 레짐별로 별도 모델 학습
> 3. 또는 레짐을 피처로 추가"

### ✅ **합의**: 사전 피처 선택 **삭제**, 레짐 분리 **추가**

----- 레짐 라벨링 차후 구현

## 4. T0 탐지 방식 논쟁

### 🎓 Q의 초기 제안

> "Threshold T0 (+6% 돌파)가 간단하고 일관성 있습니다."

### 🔥 T의 강력 반박

> "그거 완전 후행 지표야.
> 
> 진짜 세력은 +6% 찍기 **한참 전**에 치고 나가.
> 니가 +6%에 잡으면 이미 늦은 거야.
> 
> **가속도 기반 T0**가 맞아. 
> 움직임이 '빨라지는 첫 순간'을 잡아야 해."

### 🎓 Q의 질문

> "가속도 threshold는 어떻게 정하나요?"

### 🔥 T의 경험적 제안

> "0.2%/분 가속이 기준이야.
> 
> 10분간 평균 0.3%/분 오르다가 갑자기 0.5%/분 되면?
> 그게 T0야. 누군가 치고 나간 거지."

### 🎓 Q의 제안

> "그럼 두 방식을 **병렬로 비교**하고,
> 각각의 T0에서 피처를 추출해서 어느 것이
> Daygainer 예측에 더 유효한지 검증하면 되겠네요."

### ✅ **합의**: T0 방식 2개 **병렬 유지**, 사후 비교 분석

---

## 5. 프리마켓 데이터 논쟁

### 🎓 Q의 회의적 견해

> "프리마켓 데이터는 유동성이 낮아 노이즈가 많습니다.
> 제외하는 게 나을 수 있어요."

### 🔥 T의 강력 반대

> "뭐? 프리마켓이 **모든 것**이야.
> 
> 갭업 20% 종목이 정규장에서 30% 더 가냐 빠지냐는
> **프리마켓 거래량**으로 거의 결정돼.
> 
> 프리마켓 RVOL > 10x면 폭발 확정이야."

### 🎓 Q의 질문

> "구체적으로 어떤 프리마켓 피처가 유의미한가요?"

### 🔥 T의 핵심 피처 제안

> 1. `premarket_rvol` - 프리마켓 거래량 / 전일 평균
> 2. `premarket_range` - (고점 - 저점) / 시가
> 3. `premarket_close_location` - 종가가 프리마켓 범위의 어디에?
> 4. `gap_pct` - 전일 종가 대비 프리마켓 종가 갭
> 5. `premarket_volume_profile` - 초반 vs 후반 거래량

### ✅ **합의**: 프리마켓 피처 **유지 + 확장**, 별도 섹션으로 분리

---

## 6. 최종 전략 수정 사항

| 항목 | 기존 | 수정 |
|------|------|------|
| 다중공선성 제거 | ✅ 적용 | ❌ **삭제**, 괴리 피처 추가 |
| 분봉 지표 수 | 130개 전체 | **20개 핵심** × 4윈도우 |
| 피처 사전 선택 | SelectKBest 30개 | ❌ **삭제**, XGBoost 정규화 의존 |
| 시장 레짐 | 미고려 | ✅ **레짐 라벨 추가** | <차후구현>
| T0 탐지 | Threshold 우선 | **병렬 비교** 유지 |
| 프리마켓 | 기본 4개 | ✅ **5개로 확장** |

---

## 7. 수정된 피처 구성

### 7.1 일봉 피처 (~150개)

```
원본 130개 
+ 괴리 피처 20개 (rsi_5_14_div, macd_signal_div, ...)
= ~150개
```

### 7.2 분봉 피처 (~100개)

```
핵심 20개 × 4 윈도우 (15m, 30m, 60m, 120m)
+ 윈도우간 변화율 20개
= ~100개
```

### 7.3 프리마켓 피처 (5개)

```
premarket_rvol, premarket_range, premarket_close_location,
gap_pct, premarket_volume_profile
```

### 7.4 메타 피처 (3개)

```
market_regime (BULL/NORMAL/BEAR)
day_of_week
time_since_market_open
```

### 총계: **~260개 피처**

---

## 8. T의 마무리 조언

> "마지막으로 하나.
> 
> 백테스트 결과가 좋아도 바로 믿지 마.
> **2024년 데이터로만 학습하고 2025년 데이터로 테스트**해봐.
> 
> 이거 통과 못하면 과적합이야. 버려."

---

## 9. Q의 마무리 정리

> "정리하면:
> 
> 1. **다중공선성 허용** - 괴리가 알파일 수 있음
> 2. **분봉 핵심 집중** - 전체 130개는 노이즈
> 3. **레짐 분리** - 시장 상황별 패턴 상이
> 4. **프리마켓 중시** - 실전 트레이더 경험 반영
> 5. **Out-of-Sample 필수** - 과적합 검증
> 
> 이 원칙으로 Phase E 재설계하겠습니다."

---

**문서 이력**
| 버전 | 일자 | 변경 내용 |
|------|------|----------|
| 1.0 | 2026-01-15 | 초안 - Q vs T 토론 정리 |
