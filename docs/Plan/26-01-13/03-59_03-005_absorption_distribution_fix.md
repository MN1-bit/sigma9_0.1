# 03-005 Absorption 알고리즘 분포 개선 계획

> **작성일**: 2026-01-06  
> **상태**: ✅ 구현 완료  
> **관련**: `03-004_score_v3.2_improvement.md` Phase 2

---

## 1. 현재 문제점

### 1.1 증상
- **0점 과다**: 전체 종목의 약 50% 이상이 0점
- **100점 과다**: 조건 충족 시 극단값으로 수렴
- **중간값 부족**: 0.3~0.7 범위 분포 희소

### 1.2 원인 분석

| 원인 | 문제점 |
|------|--------|
| `sv_norm <= 0` → 0점 | 약 50% 종목이 무조건 0점 |
| `price_change > 5%` → 0점 | 상승 중인 종목 전부 제외 |
| Sigmoid 중심점 +1 | absorption_score >= 1이어야 0.5 이상 |

---

## 2. 개선 방안 (Option A: 부드러운 페널티)

### 핵심 개념
- **매도 우세 (sv_norm <= 0)**: 0.0 ~ 0.5 범위로 표현
- **매수 우세 (sv_norm > 0)**: 0.5 ~ 1.0 범위로 표현

### 구현 코드

```python
if sv_norm <= 0:
    # 매도 우세: 0.0 ~ 0.5 범위
    intensity = 0.5 / (1 + np.exp(-sv_norm * 2))
else:
    # 매수 우세: 0.5 ~ 1.0 범위
    absorption_score = sv_norm / (avg_pr / 0.02 + 0.1)
    intensity = 0.5 + 0.5 / (1 + np.exp(-absorption_score + 0.5))
```

### 예상 분포

| sv_norm | 강도 |
|---------|------|
| -3.0 | 0.01 |
| -1.0 | 0.12 |
| 0.0 | 0.50 |
| +1.0 | 0.73 |
| +3.0 | 0.95 |

### 예상 효과

| 지표 | 현재 | 개선 후 |
|------|------|---------|
| 0점 비율 | ~50% | ~5% |
| 100점 비율 | ~20% | ~5% |
| 0.3~0.7 분포 | ~10% | ~50% |

---

## 3. 구현 결과

- [x] `_calc_obv_divergence_intensity_v3()` 수정
- [x] 구문 검사 통과
- [ ] GUI 분포 확인
