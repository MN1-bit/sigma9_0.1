# ìŠ¤íƒ€íŠ¸ì—… ì—ëŸ¬ ë¶„ì„ v2 (2026-01-10) - ê³„íšì„œ

> **ë¶„ì„ ì¼ì‹œ**: 2026-01-10 07:07 KST â†’ **ì—…ë°ì´íŠ¸**: 2026-01-10 07:22 KST
> **ì„ í–‰ ì´ìŠˆ**: [13-001](13-001_startup_errors_20260110.md) (âœ… ìˆ˜ì • ì™„ë£Œ)
> **ìƒíƒœ**: ğŸ”´ ìˆ˜ì • í•„ìš” (3ê°œ ì´ìŠˆ)

---

## ğŸ“‹ ìš”ì•½

| # | Issue | íŒŒì¼ | ìˆ˜ì • ë°©í–¥ |
|---|-------|-----|----------|
| 1 | StrategyLoader í´ë” êµ¬ì¡° ë¯¸ì§€ì› | `strategy_loader.py` | í´ë” íƒìƒ‰ ë¡œì§ ì¶”ê°€ |
| 2 | load_watchlist_context í˜¸ì¶œ | `ignition_monitor.py` | ~~ë©”ì„œë“œ ë³µì›~~ â†’ í˜¸ì¶œë¶€ ì‚­ì œ (Dead Code) |
| 3 | RealtimeScanner dbâ†’data_repository | `realtime.py` | `data_repository` ì‚¬ìš© |

---

## ğŸ”´ Issue #1: StrategyLoader ì „ëµ íŒŒì¼ 0ê°œ ë°œê²¬

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—ëŸ¬** | `[StrategyLoader] ë°œê²¬ëœ ì „ëµ: []` |
| **ì›ì¸** | `discover_strategies()`ê°€ `*.py` íŒŒì¼ë§Œ íƒìƒ‰ â†’ `seismograph/` í´ë” ë¬´ì‹œ |

### ìˆ˜ì •: [strategy_loader.py](file:///d:/Codes/Sigma9-0.1/backend/core/strategy_loader.py)

`discover_strategies()` (L147 ì´í›„):
```diff
+    # í´ë” êµ¬ì¡° ì „ëµ íƒìƒ‰ (seismograph/ ë“±)
+    for folder in self.strategy_dir.iterdir():
+        if folder.is_dir() and not folder.name.startswith("_"):
+            if (folder / "__init__.py").exists():
+                found.append(folder.name)
```

`load_strategy()` (L205 ë¶€ê·¼):
```diff
-    filepath = self.strategy_dir / f"{strategy_name}.py"
+    filepath = self.strategy_dir / f"{strategy_name}.py"
+    folder_path = self.strategy_dir / strategy_name
+    if not filepath.exists() and folder_path.is_dir():
+        filepath = folder_path / "__init__.py"
```

---

## ğŸ”´ Issue #2: load_watchlist_context í˜¸ì¶œ ì—ëŸ¬

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—ëŸ¬** | `'SeismographStrategy' object has no attribute 'load_watchlist_context'` |
| **ë°œìƒ ìœ„ì¹˜** | `ignition_monitor.py` L112 |

### ì˜í–¥ë„ ë¶„ì„ ê²°ê³¼

```
load_watchlist_context() í˜¸ì¶œ
    â†“
_watchlist_contextì— ì €ì¥
    â†“
âŒ ì½ëŠ” ì½”ë“œ ì—†ìŒ (Dead Code)
```

- `_watchlist_context`ë¥¼ ì½ëŠ” ì½”ë“œê°€ í˜„ì¬ SeismographStrategyì— ì—†ìŒ
- IgnitionMonitorëŠ” ìì²´ `watchlist_data`ì—ì„œ `last_close`, `stage_number`, `avg_volume` ì§ì ‘ ì‚¬ìš©
- **ë©”ì„œë“œ ë³µì› ë¶ˆí•„ìš” â†’ í˜¸ì¶œë¶€ ì‚­ì œ**

### ìˆ˜ì •: [ignition_monitor.py](file:///d:/Codes/Sigma9-0.1/backend/core/ignition_monitor.py)

L111-112:
```diff
-        # ì „ëµì— Watchlist Context ë¡œë“œ
-        self.strategy.load_watchlist_context(watchlist)
+        # NOTE: load_watchlist_context ì‚­ì œ - watchlist_dataì—ì„œ ì§ì ‘ ì²˜ë¦¬
```

---

## ğŸ”´ Issue #3: RealtimeScanner ìƒì„±ì ì¸ì ë¶ˆì¼ì¹˜

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì—ëŸ¬** | `RealtimeScanner.__init__() got an unexpected keyword argument 'db'` |
| **ì›ì¸** | [11-002] ë¦¬íŒ©í„°ë§ í›„ `db` â†’ `data_repository`ë¡œ ë³€ê²½ë¨ |

### ìˆ˜ì •: [realtime.py](file:///d:/Codes/Sigma9-0.1/backend/startup/realtime.py)

L264-293:
```diff
+    from backend.data.data_repository import DataRepository
+    from backend.data.parquet_manager import ParquetManager
+
+    parquet_manager = ParquetManager()
+    repo = DataRepository(parquet_manager, massive_client)

     scanner = RealtimeScanner(
         massive_client=massive_client,
         ws_manager=ws_manager,
-        db=db,
+        data_repository=repo,
         ignition_monitor=ignition_monitor,
         ...
     )
```

---

## ğŸ“‹ ìˆ˜ì • ìˆœì„œ

| ìˆœìœ„ | Issue | ì˜ˆìƒ ì‹œê°„ |
|------|-------|----------|
| 1 | StrategyLoader í´ë” ì§€ì› | 10ë¶„ |
| 2 | load_watchlist_context í˜¸ì¶œ ì‚­ì œ | 2ë¶„ |
| 3 | RealtimeScanner data_repository | 5ë¶„ |

---

## âœ… ê²€ì¦

```powershell
# ruff lint
ruff check backend/core/strategy_loader.py backend/core/ignition_monitor.py backend/startup/realtime.py --select=E,F

# import ê²€ì¦
python -c "from backend.core.strategy_loader import StrategyLoader; print(StrategyLoader().discover_strategies())"
python -c "from backend.startup.realtime import initialize_realtime_scanner; print('OK')"
```
