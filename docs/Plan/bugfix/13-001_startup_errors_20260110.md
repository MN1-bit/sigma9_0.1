# ìŠ¤íƒ€íŠ¸ì—… ì—ëŸ¬ ë¶„ì„ (2026-01-10 06:36)

> **ë¶„ì„ ì¼ì‹œ**: 2026-01-10 06:36 KST
> **ë¶„ì„ì**: Antigravity AI
> **ìƒíƒœ**: âœ… ìˆ˜ì • ì™„ë£Œ

---

## ğŸ”´ Critical Issues (ê¸°ëŠ¥ ì¥ì• )

### Issue #1: StrategyLoader.get_active_strategy() ë©”ì„œë“œ ëˆ„ë½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì‹¬ê°ë„** | ğŸ”´ Critical |
| **ì—ëŸ¬ ë©”ì‹œì§€** | `'StrategyLoader' object has no attribute 'get_active_strategy'` |
| **ë°œìƒ ìœ„ì¹˜** | [realtime.py:163](file:///d:/Codes/Sigma9-0.1/backend/startup/realtime.py#L163) |
| **ì˜í–¥** | Massive WebSocket ì´ˆê¸°í™” ì‹¤íŒ¨, ì‹¤ì‹œê°„ í‹± ë°ì´í„° ìˆ˜ì‹  ë¶ˆê°€ |

#### ì›ì¸ ë¶„ì„

`realtime.py`ì˜ `initialize_massive_websocket()` í•¨ìˆ˜ì—ì„œ `strategy_loader.get_active_strategy()`ë¥¼ í˜¸ì¶œí•˜ì§€ë§Œ, 
`StrategyLoader` í´ë˜ìŠ¤ì—ëŠ” í•´ë‹¹ ë©”ì„œë“œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ.

```python
# realtime.py:162-163 (í˜¸ì¶œë¶€)
if strategy_loader:
    active_strategy = strategy_loader.get_active_strategy()  # âŒ ë©”ì„œë“œ ì—†ìŒ
```

#### StrategyLoader í˜„ì¬ ì œê³µ ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `discover_strategies()` | ì „ëµ íŒŒì¼ ëª©ë¡ íƒìƒ‰ |
| `load_strategy(name)` | íŠ¹ì • ì „ëµ ë¡œë“œ |
| `reload_strategy(name)` | ì „ëµ í•« ë¦¬ë¡œë“œ |
| `get_strategy(name)` | ìºì‹œëœ ì „ëµ ë°˜í™˜ (ì—†ìœ¼ë©´ None) |
| `list_loaded()` | ë¡œë“œëœ ì „ëµ ëª©ë¡ |
| `unload_strategy(name)` | ì „ëµ ì–¸ë¡œë“œ |
| `unload_all()` | ì „ì²´ ì–¸ë¡œë“œ |

> [!WARNING]
> `get_active_strategy()` ë©”ì„œë“œëŠ” ì¡´ì¬í•˜ì§€ ì•ŠìŒ!

#### í•´ê²° ë°©ì•ˆ

**Option A**: StrategyLoaderì— `get_active_strategy()` ë©”ì„œë“œ ì¶”ê°€
```python
# backend/core/strategy_loader.py
def get_active_strategy(self) -> Optional[BaseStrategy]:
    """í˜„ì¬ í™œì„± ì „ëµ ë°˜í™˜ (ì²« ë²ˆì§¸ ë¡œë“œëœ ì „ëµ ë˜ëŠ” ê¸°ë³¸ ì „ëµ)"""
    if self._loaded_strategies:
        return next(iter(self._loaded_strategies.values()))
    # ë˜ëŠ” ê¸°ë³¸ ì „ëµ ë¡œë“œ
    return self.load_strategy("seismograph")
```

**Option B**: í˜¸ì¶œë¶€ì—ì„œ `get_strategy()` ë˜ëŠ” `load_strategy()` ì‚¬ìš©
```python
# realtime.py:162-163 (ìˆ˜ì •ì•ˆ)
if strategy_loader:
    active_strategy = strategy_loader.get_strategy("seismograph")  # ë˜ëŠ” load_strategy()
```

---

### Issue #2: load_watchlist í•¨ìˆ˜ ëˆ„ë½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì‹¬ê°ë„** | ğŸ”´ Critical |
| **ì—ëŸ¬ ë©”ì‹œì§€** | `cannot import name 'load_watchlist' from 'backend.data.watchlist_store'` |
| **ë°œìƒ ìœ„ì¹˜** | [realtime.py:93](file:///d:/Codes/Sigma9-0.1/backend/startup/realtime.py#L93), [realtime.py:264](file:///d:/Codes/Sigma9-0.1/backend/startup/realtime.py#L264) |
| **ì˜í–¥** | IgnitionMonitor, RealtimeScanner ì´ˆê¸°í™” ì‹¤íŒ¨ |

#### ì›ì¸ ë¶„ì„

[02-006_singleton_cleanup ë¦¬íŒ©í„°ë§](file:///d:/Codes/Sigma9-0.1/docs/Plan/refactor/02-006_singleton_cleanup.md)ì—ì„œ 
í¸ì˜ í•¨ìˆ˜ë“¤(`load_watchlist()`, `save_watchlist()`, `merge_watchlist()`)ì´ ì œê±°ë˜ì—ˆìœ¼ë‚˜, 
í˜¸ì¶œë¶€ ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì™„ë£Œë˜ì§€ ì•ŠìŒ.

**ì‚­ì œëœ í•¨ìˆ˜** (ë ˆê±°ì‹œ ì‹±ê¸€í†¤ íŒ¨í„´):
```python
# ì‚­ì œë¨: backend/data/watchlist_store.py
def load_watchlist() -> List[Dict[str, Any]]:
    return get_watchlist_store().load()
```

**í˜„ì¬ ê¶Œì¥ íŒ¨í„´** (DI ê¸°ë°˜):
```python
# WatchlistStore ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•œ ì ‘ê·¼
store = WatchlistStore()
watchlist = store.load()
```

#### ì˜í–¥ë°›ëŠ” í˜¸ì¶œë¶€

| íŒŒì¼ | ë¼ì¸ | ìƒíƒœ |
|------|------|------|
| `backend/startup/realtime.py` | 93, 264, 292 | âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” |
| `backend/core/realtime_scanner.py` | 375, 451, 569 | âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” |
| `backend/api/routes/ignition.py` | 37, 52 | âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” |
| `backend/api/routes/watchlist.py` | 34, 37 | âŒ ë§ˆì´ê·¸ë ˆì´ì…˜ í•„ìš” |

#### í•´ê²° ë°©ì•ˆ

**Option A**: DI Containerë¥¼ í†µí•œ WatchlistStore ì£¼ì… (ê¶Œì¥)
```python
# ê° ëª¨ë“ˆì—ì„œ container.watchlist_store() ì‚¬ìš©
from backend.core.container import container
watchlist = container.watchlist_store().load()
```

**Option B**: í¸ì˜ í•¨ìˆ˜ ë³µì› (ì„ì‹œ ì¡°ì¹˜)
```python
# backend/data/watchlist_store.py í•˜ë‹¨ì— ì¶”ê°€
_default_store = WatchlistStore()

def load_watchlist() -> List[Dict[str, Any]]:
    return _default_store.load()

def save_watchlist(watchlist: List[Dict[str, Any]]) -> Path:
    return _default_store.save(watchlist)

def merge_watchlist(new_items: List[Dict], update_existing: bool = True) -> List[Dict]:
    # merge ë¡œì§ êµ¬í˜„
    pass
```

---

### Issue #3: RealtimeScanner ì´ˆê¸°í™” ì‹¤íŒ¨ (ì—°ì‡„ ì¥ì• )

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì‹¬ê°ë„** | ğŸ”´ Critical |
| **ì—ëŸ¬ ë©”ì‹œì§€** | `cannot import name 'load_watchlist' from 'backend.data.watchlist_store'` |
| **ë°œìƒ ìœ„ì¹˜** | [realtime.py:298](file:///d:/Codes/Sigma9-0.1/backend/startup/realtime.py#L298) |
| **ì˜í–¥** | ì‹¤ì‹œê°„ ìŠ¤ìº” ë¶ˆê°€ |

#### ì›ì¸ ë¶„ì„

Issue #2ì˜ ì—°ì‡„ ì¥ì• . `load_watchlist` import ì‹¤íŒ¨ë¡œ ì¸í•´ ì „ì²´ ì´ˆê¸°í™” ë¸”ë¡ì´ ìŠ¤í‚µë¨.

#### í•´ê²° ë°©ì•ˆ

Issue #2 í•´ê²° ì‹œ ìë™ í•´ê²°ë¨.

---

### Issue #4: ChartPanel viewport_data_needed ì‹œê·¸ë„ ë¶ˆì¼ì¹˜

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì‹¬ê°ë„** | ğŸ”´ Critical |
| **ì—ëŸ¬ ìœ í˜•** | TypeError (ì‹œê·¸ë„ ì¸ì ìˆ˜ ë¶ˆì¼ì¹˜) |
| **ë°œìƒ ìœ„ì¹˜** | [chart_panel.py:49](file:///d:/Codes/Sigma9-0.1/frontend/gui/panels/chart_panel.py#L49) vs [pyqtgraph_chart.py:107](file:///d:/Codes/Sigma9-0.1/frontend/gui/chart/pyqtgraph_chart.py#L107) |
| **ì˜í–¥** | ì°¨íŠ¸ ë·°í¬íŠ¸ ë°ì´í„° ìš”ì²­ ì˜¤ë¥˜, ìŠ¤í¬ë¡¤ ì‹œ ì¶”ê°€ ë°ì´í„° ë¡œë“œ ë¶ˆê°€ |

#### ì›ì¸ ë¶„ì„

**ChartPanel (ìƒìœ„ ë˜í¼)** - 4ê°œ ì¸ì ê¸°ëŒ€:
```python
# chart_panel.py:49
viewport_data_needed = pyqtSignal(str, str, int, int)  # (ticker?, timeframe?, start_idx, end_idx)
```

**PyQtGraphChartWidget (ì‹¤ì œ emit)** - 2ê°œ ì¸ì ì „ë‹¬:
```python
# pyqtgraph_chart.py:107
viewport_data_needed = pyqtSignal(int, int)  # (start_idx, end_idx)

# pyqtgraph_chart.py:488
self.viewport_data_needed.emit(start_idx, end_idx)  # 2ê°œë§Œ emit
```

**Dashboard í•¸ë“¤ëŸ¬** - 2ê°œ ì¸ì ìˆ˜ì‹ :
```python
# dashboard.py:1882
def _on_viewport_data_needed(self, start_idx: int, end_idx: int):  # 2ê°œ ê¸°ëŒ€
```

#### ì—°ê²° íë¦„ ë¶„ì„

```
PyQtGraphChartWidget.viewport_data_needed (int, int)
    â†“ connect (chart_panel.py:103)
ChartPanel.viewport_data_needed (str, str, int, int) â† âŒ ì‹œê·¸ë‹ˆì²˜ ë¶ˆì¼ì¹˜!
    â†“ connect (dashboard.py:788)
Dashboard._on_viewport_data_needed(int, int)
```

> [!CAUTION]
> ì‹œê·¸ë„ ì „ë‹¬ ì‹œ `ChartPanel.viewport_data_needed.emit`ì´ 4ê°œ ì¸ìë¥¼ ê¸°ëŒ€í•˜ì§€ë§Œ,
> `PyQtGraphChartWidget.viewport_data_needed`ì€ 2ê°œë§Œ emití•˜ë¯€ë¡œ ëŸ°íƒ€ì„ TypeError ë°œìƒ ê°€ëŠ¥.

#### í•´ê²° ë°©ì•ˆ

**Option A**: ChartPanel ì‹œê·¸ë„ ì‹œê·¸ë‹ˆì²˜ë¥¼ PyQtGraphChartWidgetê³¼ ì¼ì¹˜ì‹œí‚¤ê¸° (ê¶Œì¥)
```python
# chart_panel.py:49 ìˆ˜ì •
viewport_data_needed = pyqtSignal(int, int)  # (start_idx, end_idx)
```

**Option B**: ì¤‘ê°„ ë³€í™˜ í•¸ë“¤ëŸ¬ ì¶”ê°€
```python
# chart_panel.py:103 ìˆ˜ì •
def _forward_viewport_signal(start_idx, end_idx):
    # tickerì™€ timeframeì€ í˜„ì¬ ìƒíƒœì—ì„œ ê°€ì ¸ì˜¤ê¸°
    ticker = self._current_ticker or ""
    tf = self._current_timeframe or "1D"
    self.viewport_data_needed.emit(ticker, tf, start_idx, end_idx)

self._chart_widget.viewport_data_needed.connect(_forward_viewport_signal)
```

---

## ğŸŸ¡ Warning Issues (ê¸°ëŠ¥ ì œí•œ)

### Issue #5: MassiveLoader Parquet ë¯¸í™œì„±í™”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì‹¬ê°ë„** | ğŸŸ¡ Warning |
| **ìƒíƒœ** | Parquet âŒ â†’ SQLite í´ë°± ì‚¬ìš© ì¤‘ |
| **ì˜í–¥** | ë°ì´í„° ì½ê¸° ì„±ëŠ¥ ì €í•˜ (SQLiteê°€ Parquet ëŒ€ë¹„ ëŠë¦¼) |

#### í•´ê²° ë°©ì•ˆ

Parquet í™œì„±í™” í•„ìš” (í™˜ê²½ ì„¤ì • ë˜ëŠ” ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ í›„)

---

### Issue #6: ë¡œê·¸ íŒŒì¼ ê¶Œí•œ ì˜¤ë¥˜

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì‹¬ê°ë„** | ğŸŸ¡ Warning |
| **ì—ëŸ¬ ë©”ì‹œì§€** | `sigma9.log ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ì‚¬ìš© ì¤‘` |
| **ì˜í–¥** | ë¡œê·¸ rotation ì‹¤íŒ¨ |

#### ì›ì¸ ë¶„ì„

ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ê°™ì€ ë¡œê·¸ íŒŒì¼ì— ì ‘ê·¼í•˜ê³  ìˆìŒ.
(í˜„ì¬ í„°ë¯¸ë„ì—ì„œ ì—¬ëŸ¬ backend/frontend ì¸ìŠ¤í„´ìŠ¤ê°€ ì‹¤í–‰ ì¤‘)

#### í•´ê²° ë°©ì•ˆ

1. ì¤‘ë³µ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
2. ë˜ëŠ” í”„ë¡œì„¸ìŠ¤ë³„ ë¡œê·¸ íŒŒì¼ ë¶„ë¦¬ (`sigma9_{pid}.log`)

---

## ğŸ“‹ ìˆ˜ì • ìš°ì„ ìˆœìœ„

| ìˆœìœ„ | Issue | ë³µì¡ë„ | ê¶Œì¥ ì¡°ì¹˜ |
|------|-------|--------|-----------|
| 1 | #2 load_watchlist | ì¤‘ | í¸ì˜ í•¨ìˆ˜ ë³µì› (ì„ì‹œ) â†’ ì´í›„ DI ë§ˆì´ê·¸ë ˆì´ì…˜ |
| 2 | #4 ì‹œê·¸ë„ ë¶ˆì¼ì¹˜ | í•˜ | ChartPanel ì‹œê·¸ë„ ì‹œê·¸ë‹ˆì²˜ ìˆ˜ì • |
| 3 | #1 get_active_strategy | ì¤‘ | í˜¸ì¶œë¶€ ìˆ˜ì • ë˜ëŠ” ë©”ì„œë“œ ì¶”ê°€ |
| 4 | #5 Parquet | - | ì„¤ì • í™•ì¸ |
| 5 | #6 ë¡œê·¸ | - | í”„ë¡œì„¸ìŠ¤ ì •ë¦¬ |

---

## ì°¸ê³  ë¬¸ì„œ

- [02-006_singleton_cleanup.md](file:///d:/Codes/Sigma9-0.1/docs/Plan/refactor/02-006_singleton_cleanup.md) - ì‹±ê¸€í†¤ ì •ë¦¬ ê³„íš
- [05-003_dashboard_split_phase4.md](file:///d:/Codes/Sigma9-0.1/docs/Plan/refactor/05-003_dashboard_split_phase4.md) - ChartPanel ë¦¬íŒ©í„°ë§
